# ğŸµ Music Player Flow Guide

ì´ ë¬¸ì„œëŠ” `PlayerEnvironment`ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŒì•…ì´ ì–´ë–»ê²Œ ì¬ìƒë˜ëŠ”ì§€ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤. ì¬ìƒ íë¦„ ì¤‘ì‹¬ìœ¼ë¡œ `playlist`, `play`, `queue` ê°„ì˜ ê´€ê³„ë¥¼ ì´í•´í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ“Œ í•µì‹¬ êµ¬ì„±ìš”ì†Œ

| êµ¬ì„± ìš”ì†Œ        | ì„¤ëª…                                       |
| ---------------- | ------------------------------------------ |
| **playlist**     | ì‚¬ìš©ìê°€ ì„ íƒí•œ ìŒì•… ë¦¬ìŠ¤íŠ¸                |
| **queue**        | ë‚´ë¶€ì—ì„œ ê´€ë¦¬ë˜ëŠ” ì¬ìƒ ëª©ë¡ (`MusicQueue`) |
| **play**         | í˜„ì¬ ì„ íƒí•œ ìŒì•…ì„ ì¬ìƒí•˜ëŠ” íŠ¸ë¦¬ê±°         |
| **ExoPlayer**    | ì‹¤ì œ ìŒì•…ì„ ì¬ìƒí•˜ëŠ” ë¯¸ë””ì–´ í”Œë ˆì´ì–´       |
| **currentMusic** | í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ê³¡                          |

---

## ğŸ” ì „ì²´ ì¬ìƒ íë¦„

### ğŸ“‹ ìˆœì„œë„

```mermaid
flowchart TD
  A[ì‚¬ìš©ìê°€ playlist ì„ íƒ ë˜ëŠ” play ìš”ì²­] --> B{í˜„ì¬ queueì™€ ë™ì¼í•œê°€?}
  B -- ì•„ë‹ˆìš” --> C[ê¸°ì¡´ queue ì´ˆê¸°í™”]
  C --> D[playlistë¥¼ queueë¡œ ì„¤ì •]
  D --> E[ì„ íƒí•œ indexì˜ ìŒì•…ì„ ì¬ìƒ]
  B -- ë„¤ --> F[ê¸°ì¡´ queue ìœ ì§€]
  F --> E
  E --> G[ExoPlayer prepare ë° play]
  G --> H[UI ë° ìƒíƒœ ê°±ì‹  currentMusic, duration]
```